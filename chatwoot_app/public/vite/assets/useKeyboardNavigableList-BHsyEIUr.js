import{L as g,R as k}from"./_plugin-vue_export-helper-DG4P_01H.js";const p=t=>t.key==="Enter",h=t=>t.key==="Escape",v=t=>t.shiftKey,l=t=>t.metaKey,D=t=>p(t)&&!l(t)&&!v(t),F=t=>l(t)&&p(t),A=new Set(["Alt+KeyP","Alt+KeyL"]),T="QWERTY",b="QWERTZ",K="AZERTY",C=t=>{var o;const e=t.target||document.activeElement;return!!((e==null?void 0:e.tagName)==="INPUT"||(e==null?void 0:e.tagName)==="NINJA-KEYS"||(e==null?void 0:e.tagName)==="TEXTAREA"||(e==null?void 0:e.contentEditable)==="true"||(o=e==null?void 0:e.className)!=null&&o.includes("ProseMirror"))};async function L(){const t=document.createElement("input");return t.style.position="fixed",t.style.top="-100px",document.body.appendChild(t),t.focus(),new Promise(e=>{const o=new KeyboardEvent("keypress",{key:"y",keyCode:89,which:89,bubbles:!0,cancelable:!0}),n=r=>{document.body.removeChild(t),document.removeEventListener("keypress",n),r.key==="z"?e(T):r.key==="y"?e(b):e(K)};document.addEventListener("keypress",n),t.dispatchEvent(o)})}async function P(){const t=await navigator.keyboard.getLayoutMap(),e=t.get("KeyQ"),o=t.get("KeyW"),n=t.get("KeyE"),r=t.get("KeyR"),s=t.get("KeyT"),c=t.get("KeyY");return[e,o,n,r,s,c].join("").toUpperCase()}async function R(){const t=window.cw_keyboard_layout;if(t)return t;const e=navigator.keyboard?await P():await L();return window.cw_keyboard_layout=e,e}var M=["Shift","Meta","Alt","Control"],w=typeof navigator=="object"?navigator.platform:"",m=/Mac|iPod|iPhone|iPad/.test(w),S=m?"Meta":"Control",O=w==="Win32"?["Control","Alt"]:m?["Alt"]:[];function f(t,e){return typeof t.getModifierState=="function"&&(t.getModifierState(e)||O.includes(e)&&t.getModifierState("AltGraph"))}function U(t){return t.trim().split(" ").map(function(e){var o=e.split(/\b\+/),n=o.pop(),r=n.match(/^\((.+)\)$/);return r&&(n=new RegExp("^"+r[1]+"$")),[o=o.map(function(s){return s==="$mod"?S:s}),n]})}function Y(t,e){var o=e[0],n=e[1];return!((n instanceof RegExp?!n.test(t.key)&&!n.test(t.code):n.toUpperCase()!==t.key.toUpperCase()&&n!==t.code)||o.find(function(r){return!f(t,r)})||M.find(function(r){return!o.includes(r)&&n!==r&&f(t,r)}))}function N(t,e){var o;e===void 0&&(e={});var n=(o=e.timeout)!=null?o:1e3,r=Object.keys(t).map(function(a){return[U(a),t[a]]}),s=new Map,c=null;return function(a){a instanceof KeyboardEvent&&(r.forEach(function(d){var u=d[0],E=d[1],y=s.get(u)||u;Y(a,y[0])?y.length>1?s.set(u,y.slice(1)):(s.delete(u),E(a)):f(a,a.key)||s.delete(u)}),c&&clearTimeout(c),c=setTimeout(s.clear.bind(s),n))}}const W=(t,e)=>{const o=C(t),n=typeof e=="function"?!1:e.allowOnFocusedInput;return o?(h(t)&&t.target.blur(),!n):!1},_=t=>e=>{if(W(e,t))return;(typeof t=="function"?t:t.action)(e)};async function Q(t){const e={},o=await R();return Object.keys(t).forEach(n=>{const r=o===b&&A.has(n)?`Shift+${n}`:n;e[r]=_(t[n])}),e}async function I(t){let e=new AbortController;g(async()=>{if(!t)return;const o=await Q(t),n=N(o);document.addEventListener("keydown",n,{signal:e.signal})}),k(()=>{e.abort()})}const i=t=>({action:e=>{t(),e.preventDefault()},allowOnFocusedInput:!0}),Z=(t,e,o,n)=>{const r={ArrowUp:i(t),"Control+KeyP":i(t),ArrowDown:i(e),"Control+KeyN":i(e)};return typeof o=="function"&&(r.Enter=i(()=>{var s;return((s=n.value)==null?void 0:s.length)>0&&o()})),r},j=(t,e,o)=>o==="up"?t===0?e-1:t-1:t===e-1?0:t+1;function x({items:t,onSelect:e,adjustScroll:o,selectedIndex:n}){const r=d=>{n.value=j(n.value,t.value.length,d),o()},s=()=>r("up"),c=()=>r("down"),a=Z(s,c,e,t);return I(a),{moveSelectionUp:s,moveSelectionDown:c}}export{b as L,x as a,F as b,h as c,N as d,R as e,D as h,C as i,A as k,I as u};
//# sourceMappingURL=useKeyboardNavigableList-BHsyEIUr.js.map
