import{c as l,r as g,L as B,a as L,o as k}from"./_plugin-vue_export-helper-DG4P_01H.js";import{u as w,a as x}from"./Validators-BM89Tp7H.js";import{b as C,u as b,c as v}from"./useBranding-78t2cBKJ.js";import{a as D,u as G}from"./index-CQCyHBIl.js";import{aA as M}from"./DashboardIcon-32bIzNqT.js";import{f as V}from"./dashboard-n_HDIbaW.js";import{A as N}from"./ArticleEditor-7n0dEjWj.js";import"./index-DN3rM4CW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./utils.esm-CMazHLgs.js";import"./js.cookie-Cz0CWeBA.js";import"./index-Cw6s38ZS.js";import"./Icon-Br_HG2DA.js";import"./index-BfMIn2Vn.js";import"./typing-DAnjQ7Xa.js";import"./vue-dompurify-html-CEAHYyWB.js";import"./useKeyboardNavigableList-BHsyEIUr.js";import"./helper-BVTgYTlr.js";import"./module-CxJOWM_e.js";import"./BarChart-D-eGs9nq.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-LMsN22VU.js";import"./HelpCenterLayout-kAjKzASB.js";const nt={__name:"PortalsArticlesEditPage",setup(O){const s=w(),m=x(),_=C(),{t:A}=b(),{articleSlug:n,portalSlug:o}=s.params,f=v("articles/articleById"),c=l(()=>f.value(n)),y=v("portals/portalBySlug"),E=l(()=>y.value(o)),u=g(!1),p=g(!1),S=l(()=>{var i;const{slug:t,locale:a}=c.value.category,{slug:e}=c.value,r=(i=E.value)==null?void 0:i.custom_domain;return V(o,t,a,e,r)}),d=async({...t},a=!1)=>{const e=a?"articles/updateAsync":"articles/update";u.value=!0;try{await _.dispatch(e,{portalSlug:o,articleId:n,...t}),p.value=!0}catch(r){const i=(r==null?void 0:r.message)||A("HELP_CENTER.EDIT_ARTICLE_PAGE.API.ERROR");G(i)}finally{setTimeout(()=>{u.value=!1,p.value=!0},1500)}},R=async({...t})=>{d({...t},!0)},T=l(()=>s.name==="portals_categories_articles_index"||s.name==="portals_categories_articles_edit"||s.name==="portals_categories_index"),h=()=>{const{tab:t,categorySlug:a,locale:e}=s.params;T.value?m.push({name:"portals_categories_articles_index",params:{categorySlug:a,locale:e}}):m.push({name:"portals_articles_index",params:{tab:t,categorySlug:a,locale:e}})},I=()=>{_.dispatch("articles/show",{id:n,portalSlug:o})},P=()=>{var t;window.open(S.value,"_blank"),D(M.PREVIEW_ARTICLE,{status:(t=c.value)==null?void 0:t.status})};return B(I),(t,a)=>(k(),L(N,{article:c.value,"is-updating":u.value,"is-saved":p.value,onSaveArticle:d,onSaveArticleAsync:R,onPreviewArticle:P,onGoBack:h},null,8,["article","is-updating","is-saved"]))}};export{nt as default};
//# sourceMappingURL=PortalsArticlesEditPage-Da8uXtQQ.js.map
