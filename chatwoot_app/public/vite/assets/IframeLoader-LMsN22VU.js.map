{"version":3,"file":"IframeLoader-LMsN22VU.js","sources":["../../../app/javascript/shared/components/ArticleSkeletonLoader.vue","../../../app/javascript/shared/components/IframeLoader.vue"],"sourcesContent":["<template>\n  <div class=\"p-4 space-y-6 bg-n-background\">\n    <div class=\"space-y-2 animate-loader-pulse\">\n      <div class=\"h-6 bg-n-slate-4 dark:bg-n-slate-6 rounded w-1/5\" />\n      <div class=\"h-10 bg-n-slate-4 dark:bg-n-slate-6 rounded w-3/5\" />\n    </div>\n    <div class=\"space-y-2 animate-loader-pulse\">\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded\" />\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded\" />\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded\" />\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded w-4/5\" />\n    </div>\n    <div class=\"space-y-2 animate-loader-pulse\">\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded\" />\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded\" />\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded w-3/5\" />\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded\" />\n    </div>\n    <div class=\"space-y-2 animate-loader-pulse\">\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded\" />\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded\" />\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded\" />\n      <div class=\"h-5 bg-n-slate-4 dark:bg-n-slate-6 rounded w-3/5\" />\n    </div>\n  </div>\n</template>\n","<script setup>\nimport { ref, useTemplateRef, computed, watch } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport ArticleSkeletonLoader from 'shared/components/ArticleSkeletonLoader.vue';\n\nconst props = defineProps({\n  url: {\n    type: String,\n    default: '',\n  },\n  isRtl: {\n    type: Boolean,\n    default: false,\n  },\n  isDirApplied: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst { t } = useI18n();\n\nconst iframe = useTemplateRef('iframe');\nconst isLoading = ref(true);\nconst showEmptyState = ref(!props.url);\n\nconst direction = computed(() => (props.isRtl ? 'rtl' : 'ltr'));\n\nconst applyDirection = () => {\n  if (!iframe.value) return;\n  if (!props.isDirApplied) return; // If direction is already applied through props, do not apply again (iframe case)\n  try {\n    const doc =\n      iframe.value.contentDocument || iframe.value.contentWindow?.document;\n    if (doc?.documentElement) {\n      doc.documentElement.dir = direction.value;\n      doc.documentElement.setAttribute('data-dir-applied', 'true');\n    }\n  } catch (e) {\n    // error\n  }\n};\n\nwatch(() => props.isRtl, applyDirection);\n\nconst handleIframeLoad = () => {\n  isLoading.value = false;\n  applyDirection();\n};\n\nconst handleIframeError = () => {\n  isLoading.value = false;\n  showEmptyState.value = true;\n};\n</script>\n\n<template>\n  <div class=\"relative overflow-hidden pb-1/2 h-full\">\n    <iframe\n      v-if=\"url\"\n      ref=\"iframe\"\n      :src=\"url\"\n      class=\"absolute w-full h-full top-0 left-0\"\n      @load=\"handleIframeLoad\"\n      @error=\"handleIframeError\"\n    />\n    <ArticleSkeletonLoader\n      v-if=\"isLoading\"\n      class=\"absolute w-full h-full top-0 left-0\"\n    />\n    <div\n      v-if=\"showEmptyState\"\n      class=\"absolute w-full h-full top-0 left-0 flex justify-center items-center\"\n    >\n      <p>{{ t('PORTAL.IFRAME_ERROR') }}</p>\n    </div>\n  </div>\n</template>\n"],"names":["_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_hoisted_1","props","__props","t","useI18n","iframe","useTemplateRef","isLoading","ref","showEmptyState","direction","computed","applyDirection","doc","_a","watch","handleIframeLoad","handleIframeError"],"mappings":"oPACE,SAAAA,EAAAC,EAAAC,EAAA,CADF,OAAAC,EAAA,EAAAC,EAAA,MAAAC,EAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,q5CCKA,MAAMI,EAAQC,EAeR,CAAE,EAAAC,CAAC,EAAKC,EAAO,EAEfC,EAASC,EAAe,QAAQ,EAChCC,EAAYC,EAAI,EAAI,EACpBC,EAAiBD,EAAI,CAACP,EAAM,GAAG,EAE/BS,EAAYC,EAAS,IAAOV,EAAM,MAAQ,MAAQ,KAAM,EAExDW,EAAiB,IAAM,OAC3B,GAAKP,EAAO,OACPJ,EAAM,aACX,GAAI,CACF,MAAMY,EACJR,EAAO,MAAM,mBAAmBS,EAAAT,EAAO,MAAM,gBAAb,YAAAS,EAA4B,UAC1DD,GAAA,MAAAA,EAAK,kBACPA,EAAI,gBAAgB,IAAMH,EAAU,MACpCG,EAAI,gBAAgB,aAAa,mBAAoB,MAAM,EAE/D,MAAY,CAEZ,CACF,EAEAE,EAAM,IAAMd,EAAM,MAAOW,CAAc,EAEvC,MAAMI,EAAmB,IAAM,CAC7BT,EAAU,MAAQ,GAClBK,EAAc,CAChB,EAEMK,EAAoB,IAAM,CAC9BV,EAAU,MAAQ,GAClBE,EAAe,MAAQ,EACzB"}