import{n as p,o as l,e as A,p as c,t as f,z as w,H as g,c as h,F as I,j as N,a as b,_ as x,ag as M,w as R,L as E,g as k,x as y}from"./_plugin-vue_export-helper-DG4P_01H.js";import{_ as V,I as F,u as L,c as z}from"./widget-BcosoSvU.js";import{j as W}from"./sharedFrameEvents-0qZ2yOho.js";import{c as _,b as B,u as H,m as P}from"./useBranding-78t2cBKJ.js";import{a as $}from"./Validators-BM89Tp7H.js";import"./vue-dompurify-html-CEAHYyWB.js";import"./_commonjsHelpers-BosuxZz1.js";import"./utils.esm-CMazHLgs.js";import"./constants-lVAyZKq6.js";import"./index-BfMIn2Vn.js";import"./index-DN3rM4CW.js";import"./Icon-Br_HG2DA.js";import"./Branding-BS-MvpW4.js";import"./module-CxJOWM_e.js";const U={class:"flex flex-col gap-3 w-full shadow outline-1 outline outline-n-container rounded-xl bg-n-background dark:bg-n-solid-2 px-5 py-4"},j={__name:"TeamAvailability",props:{availableAgents:{type:Array,default:()=>[]},hasConversation:{type:Boolean,default:!1}},emits:["startConversation"],setup(e,{emit:t}){const i=e,u=t,a=_("appConfig/getWidgetColor"),s=()=>{u("startConversation"),i.hasConversation||F.sendMessage({event:"onEvent",eventIdentifier:W,data:{hasConversation:!1}})};return(o,n)=>(l(),p("div",U,[A(V,{agents:e.availableAgents,"show-header":"","show-avatars":""},null,8,["agents"]),c("button",{class:"inline-flex items-center gap-1 font-medium text-n-slate-12",style:w({color:g(a)}),onClick:s},[c("span",null,f(e.hasConversation?o.$t("CONTINUE_CONVERSATION"):o.$t("START_CONVERSATION")),1),n[0]||(n[0]=c("i",{class:"i-lucide-chevron-right size-5 mt-px"},null,-1))],4)]))}},D={class:"underline-offset-2 leading-6 ltr:text-left rtl:text-right text-base"},G={__name:"ArticleListItem",props:{link:{type:String,default:""},title:{type:String,default:""}},emits:["selectArticle"],setup(e,{emit:t}){const i=e,u=t,a=()=>{u("selectArticle",i.link)};return(s,o)=>(l(),p("div",{class:"flex items-center justify-between rounded cursor-pointer text-n-slate-11 hover:text-n-slate-12 gap-2",role:"button",onClick:a},[c("button",D,f(e.title),1),o[0]||(o[0]=c("span",{class:"i-lucide-chevron-right text-base shrink-0"},null,-1))]))}},q={class:"flex flex-col gap-3"},J={class:"font-medium text-n-slate-12"},K={class:"flex flex-col gap-4"},Q={__name:"ArticleBlock",props:{articles:{type:Array,default:()=>[]}},emits:["view","viewAll"],setup(e,{emit:t}){const i=e,u=t,a=_("appConfig/getWidgetColor"),s=h(()=>i.articles.slice(0,6)),o=n=>{u("view",n)};return(n,r)=>(l(),p("div",q,[c("h3",J,f(n.$t("PORTAL.POPULAR_ARTICLES")),1),c("div",K,[(l(!0),p(I,null,N(s.value,v=>(l(),b(G,{key:v.slug,link:v.link,title:v.title,onSelectArticle:o},null,8,["link","title"]))),128))]),c("div",null,[c("button",{class:"font-medium tracking-wide inline-flex",style:w({color:g(a)}),onClick:r[0]||(r[0]=v=>n.$emit("viewAll"))},[c("span",null,f(n.$t("PORTAL.VIEW_ALL_ARTICLES")),1)],4)])]))}},X={},Y={class:"py-4 space-y-4"};function Z(e,t){return l(),p("div",Y,t[0]||(t[0]=[M('<div class="space-y-2 animate-pulse"><div class="h-6 bg-n-slate-5 dark:bg-n-alpha-black1 rounded w-2/5"></div></div><div class="space-y-2 animate-pulse"><div class="h-4 bg-n-slate-5 dark:bg-n-alpha-black1 rounded"></div><div class="h-4 bg-n-slate-5 dark:bg-n-alpha-black1 rounded"></div><div class="h-4 bg-n-slate-5 dark:bg-n-alpha-black1 rounded"></div></div><div class="space-y-2 animate-pulse"><div class="h-4 bg-n-slate-5 dark:bg-n-alpha-black1 rounded w-1/5"></div></div>',3)]))}const ee=x(X,[["render",Z]]),te=(e="",t=[])=>{if(!e||!Array.isArray(t)||!t.length)return null;const[i]=e.split("_");return[e,i,t.find(a=>a.startsWith(`${i}_`))].find(a=>a&&t.includes(a))??null},ne={key:0,class:"w-full shadow outline-1 outline outline-n-container rounded-xl bg-n-background dark:bg-n-solid-2 px-5 py-4"},ae={key:1,class:"hidden"},se={__name:"ArticleContainer",setup(e){const t=B(),i=$(),u=H(),{prefersDarkMode:a}=L(),s=h(()=>window.chatwootWebChannel.portal),o=_("article/popularArticles"),n=_("article/uiFlags"),r=h(()=>{const{locale:d}=u;if(!s.value||!s.value.config)return null;const{allowed_locales:m}=s.value.config;return te(d.value,m)}),v=()=>{s.value&&r.value&&t.dispatch("article/fetch",{slug:s.value.slug,locale:r.value})},C=d=>{const m=new URLSearchParams({show_plain_layout:"true",theme:a.value?"dark":"light",...r.value&&{locale:r.value}}),O=`${d}?${m.toString()}`;i.push({name:"article-viewer",query:{link:O}})},S=()=>{const{portal:{slug:d}}=window.chatwootWebChannel;C(`/hc/${d}/${r.value}`)},T=h(()=>!n.value.isFetching&&!n.value.isError&&!!o.value.length&&!!r.value);return R(r,(d,m)=>{d&&d!==m&&v()}),E(()=>v()),(d,m)=>s.value&&(g(n).isFetching||g(o).length)?(l(),p("div",ne,[T.value?(l(),b(Q,{key:0,articles:g(o),onView:C,onViewAll:S},null,8,["articles"])):k("",!0),g(n).isFetching?(l(),b(ee,{key:1})):k("",!0)])):(l(),p("div",ae))}},oe={name:"Home",components:{ArticleContainer:se,TeamAvailability:j},mixins:[z],setup(){return{router:$()}},computed:{...P({availableAgents:"agent/availableAgents",conversationSize:"conversation/getConversationSize",unreadMessageCount:"conversation/getUnreadMessageCount"})},methods:{startConversation(){return this.preChatFormEnabled&&!this.conversationSize?this.router.replace({name:"prechat-form"}):this.router.replace({name:"messages"})}}},ie={class:"z-50 flex flex-col justify-end flex-1 w-full p-4 gap-4"};function le(e,t,i,u,a,s){const o=y("TeamAvailability"),n=y("ArticleContainer");return l(),p("div",ie,[A(o,{"available-agents":e.availableAgents,"has-conversation":!!e.conversationSize,"unread-count":e.unreadMessageCount,onStartConversation:s.startConversation},null,8,["available-agents","has-conversation","unread-count","onStartConversation"]),A(n)])}const ke=x(oe,[["render",le]]);export{ke as default};
//# sourceMappingURL=Home-Df4kXN3u.js.map
